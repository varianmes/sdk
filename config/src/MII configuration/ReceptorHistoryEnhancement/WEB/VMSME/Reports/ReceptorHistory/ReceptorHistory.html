<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Receptor History Report</title>
<link rel="stylesheet" type="text/css" href="../Common/css/Application.css" />
<script type="text/javascript" src="../../dhtmlxSuite/dhtmlxAjax/codebase/dhtmlxcommon.js" ></script>

<script type="text/javascript" src="../Common/jquery/jquery-1.8.3.min.js"></script>


<script type ="text/javascript" language="javascript">


function getReceptorHistory()
{

	var EnteredSerial = document.getElementById("InputSerial").value;
	
	var validateSerailURL = "/XMII/Illuminator?QueryTemplate=VMSME/Reports/DHR/ValidateSerialNumber&Param.1="+EnteredSerial+"&Content-Type=text/xml"
	var isValidOP = dhtmlxAjax.getSync(encodeURI(validateSerailURL));
	//alert(isValidOP .doSerialization());
	
	var isValidFlag = isValidOP.xmlDoc.responseXML.getElementsByTagName("ISValid")[0].text;
	
	if (isValidFlag == 1)
	{

	document.RecpHistoryIGrid.getQueryObject().setParam(1,EnteredSerial);
	document.RecpHistoryIGrid.refresh();
	//document.RecpHistoryIGrid.style.visibility = "visible";
	//document.getElementById("RecpHistoryIGridID").style.visibility="visible";
	
	}
	else
	{
		alert("Please enter valid Serial number");
	}
}
function OpenSearchComponent()
{
	var x = window.screen.availWidth/2 - 255;  //subtract half of width
	var y = window.screen.availHeight/2 - 255; //subtract half of height
	var serial=$("#InputSerial").val();
	window.open("../DHR/SearchForSerialNumber.html?glass="+serial+"&sfc=&item=", "SearchComponent", "width=520,height=400,resizable=no,scrollbars=no,status=no,left=" + x + ",top=" + y);
	

}
function GetSerialNumFromChild(myVal)
{
	document.getElementById('InputSerial').value = myVal;
}

</script>

</head>

<body>
	<div class="header">
		<div><img class="headerlogo" src="../Common/images/VMS_logo.gif"  height="44px"  width ="350px" alt="Varian logo"/></div>
	    <div><span class="headerTitle">Receptor History Report</span></div>
	
	</div>
	<div class="content">
		<div class="whitePanel" >
	        <table style="position: relative;width:100%;left: 10px;">
				<tr>
					<td style="width: 94px">Enter Serial</td>
					<td style="width:120px" ><input type="text" id ="InputSerial" style="width:100%;"/></td>
					<td style="width: 30px"><input type="button" value="..." onclick="OpenSearchComponent()"/></td>
					<td><input type="button" class="Button" id="getDHRDet" value="Get Details" onclick="getReceptorHistory()"/></td>
				</tr>
			</table>
		</div>
		<div><br/></div>
	    <div class="whitePanel" style="width:100%;height: 5940px;"> 
	    	
			<div id="RecpHistoryGrid" style="position: relative; top: 10px; left: 10px; bottom:10px;right:10px; width: 1280px; height: 540px; aborder: #B5CDE4 1px solid;">
			<APPLET NAME="RecpHistoryIGrid" id = "RecpHistoryIGridID" CODEBASE="/XMII/Classes" CODE="iGrid" ARCHIVE="illum8.zip" HEIGHT="490" WIDTH = "1240"  MAYSCRIPT >
				<PARAM NAME="QueryTemplate" VALUE="VMSME/Reports/ReceptorHistory/GetReceptorHisory">
				<PARAM NAME="DisplayTemplate" VALUE="VMSME/Reports/ReceptorHistory/ReceptorHistoryGrid">
			</APPLET>
			</div>	    
	    </div>
	
		<!--<div id="logarea" style="background-color:lightgrey;height:218px;width:250px; overflow:auto"></div>-->
	
	    <div class="footer">
			<div class="copyright">	&copy; 1999-2012 Varian Medical Systems, Inc. All rights reserved.</div>
		</div>
	 </div>
<script type="text/javascript" language="javascript">
	$("#InputSerial").keyup(function (e) {
	    if (e.keyCode == 13) {
	       OpenSearchComponent();
	    }
	});
	
	
</script>	
	 
</body>
</html>
